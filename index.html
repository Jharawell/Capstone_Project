<!DOCTYPE html>
<html lang="en">
  
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CentralComm</title>
    <link rel="shortcut icon" href="../assets/images/logo.png" type="image/x-icon" />

    <!--Chatbot script-->
    <script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>

    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Font Awesome -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans&family=Poppins:wght@300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <link rel="icon" href="logo.png" type="image/x-icon" />
    <!-- Custom CSS -->
    <style>
      :root {
        --primary-color: #253B81;
        --secondary-color: #212932;
        --text-color: #2F2F2F;
        --light-bg: #E5F3FE;
        --light-blue: #6aa1ff;
        --dark-blue-color: #04111b;
        --hover-shadow: #658be6;
        --gradient-start: #253B81;
        --gradient-end: #3f5cbc;
        --sec-gradient-end: #213575;
        --box-shadow: 0 5px 15px rgba(46, 53, 125, 0.3);
        --card-shadow: 0 4px 6px rgba(63, 95, 199, 0.1);
      }

      /* Enhanced Animations */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes float {
        0% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
        100% {
          transform: translateY(0px);
        }
      }

      /* Improved Base Styles */
      body {
        font-family: "Poppins", sans-serif;
        background-color: white;
        line-height: 1.6;
      }

      /* Enhanced Navbar Styles */
      .navbar {
        background: white;
        backdrop-filter: blur(10px);
        box-shadow: var(--box-shadow);
        padding: 1rem 2rem;
        transition: all 0.3s ease;
        position: fixed;
        width: 100%;
        top: 0;
        z-index: 1000;
      }

      .navbar.scrolled {
        padding: 0.8rem 2rem;
        box-shadow: var(--box-shadow);
        background: var(--primary-color);
      }

      .navbar-brand {
        display: flex;
        align-items: center;
        font-weight: 900;
        transition: all 0.3s ease;
        font-size: 1.3rem;
      }

      .navbar-brand:hover {
        transform: translateX(5px);
        color: whitesmoke;
      }

      .central-brand {
        color: var(--primary-color);
      }

      .comm-brand {
        color: var(--secondary-color);
      }

      .navbar-brand img {
        height: 40px;
        width: auto;
        transition: all 0.3s ease;
      }

      .navbar-brand:hover img {
        transform: rotate(5deg);
      }

      .nav-link {
        color: var(--primary-color);
        font-weight: 500;
        padding: 0.5rem 1rem;
        transition: all 0.3s ease;
        position: relative;
        margin: 0 0.5rem;
        border-radius: 8px;
      }

      .nav-link::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        height: 3px;
        background: linear-gradient(
          90deg,
          var(--hover-shadow),
          var(--gradient-end)
        );
        transition: width 0.3s ease;
        border-radius: 2px;
      }

      .nav-link:hover::after,
      .nav-link.active::after {
        width: 100%;
      }

      .nav-link:hover,
      .nav-link.active {
        color: var(--hover-shadow);
        background: var(white);
      }

      .login-btn {
        background: linear-gradient(
          180deg,
          var(--gradient-start),
          var(--gradient-end)
        );
        color: white;
        padding: 0.6rem 1.8rem;
        transition: all 0.3s ease;
        border-radius: 0 25px;
        font-weight: 500;
        position: relative;
        overflow: hidden;
      }

      .login-btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: 0.5s;
      }

      .login-btn:hover::before {
        left: 100%;
      }

      .login-btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--box-shadow);
        background: var(--hover-shadow);
        color: white;
      }

      .navbar-toggler {
        border: none;
        padding: 0.5rem;
        transition: all 0.3s ease;
      }

      .navbar-toggler:focus {
        box-shadow: none;
      }

      .navbar-toggler-icon {
        background-image: none;
        position: relative;
        left: 20px;
        width: 30px;
        height: 2px;
        background: var(--primary-color);
        transition: all 0.3s ease;
      }

      .navbar-toggler-icon::before,
      .navbar-toggler-icon::after {
        content: "";
        position: absolute;
        right: 0.1px;
        width: 30px;
        height: 2px;
        background: var(--primary-color);
        transition: all 0.3s ease;
      }

      .navbar-toggler-icon::before {
        transform: translateY(-8px);
      }

      .navbar-toggler-icon::after {
        transform: translateY(8px);
      }

      .navbar-toggler[aria-expanded="true"] .navbar-toggler-icon {
        background: transparent;
      }

      .navbar-toggler[aria-expanded="true"] .navbar-toggler-icon::before {
        transform: rotate(45deg);
      }

      .navbar-toggler[aria-expanded="true"] .navbar-toggler-icon::after {
        transform: rotate(-45deg);
      }

      /* Responsive Improvements */
      @media (max-width: 991.98px) {
        .navbar-collapse {
          background: white;
          padding: 1rem;
          border-radius: 15px;
          box-shadow: var(--box-shadow);
          margin-top: 1rem;
        }

        .nav-item {
          margin: 0.5rem 0;
        }

        .nav-link {
          padding: 0.8rem 1rem;
        }

        .login-btn {
          margin-top: 0.5rem;
          width: 100%;
          text-align: center;
        }
      }

      @media (max-width: 428px) {
        /* Navbar adjustments */
        .navbar {
          padding: 0.6rem;
        }

        .navbar-brand {
          font-size: 1rem;
        }

        .navbar-brand img {
          height: 25px;
        }

        /* Hero section adjustments */
        .hero-section {
          padding: 5rem 0 3rem;
        }

        .hero-content h1 {
          font-size: 1.5rem;
          line-height: 1.3;
        }

        .hero-content p {
          font-size: 0.9rem;
        }
        

        /* Search container adjustments */
        .search-container {
          padding: 1.2rem;
        }

        .search-title h2 {
          font-size: 1.3rem;
        }

        .search-title p {
          font-size: 0.9rem;
        }

        .search-input {
          padding: 0.8rem 1rem;
          font-size: 0.9rem;
        }

        .search-button {
          padding: 0.8rem 1.2rem;
          font-size: 0.9rem;
        }

        /* Feature cards adjustments */
        .feature-card {
          padding: 1.5rem;
        }

        .feature-icon {
          width: 40px;
          height: 40px;
        }

        .feature-icon i {
          font-size: 1.2rem;
        }

        .feature-title {
          font-size: 1.1rem;
        }

        .feature-description {
          font-size: 0.9rem;
        }

        /* Button adjustments */
        .btn {
          padding: 0.5rem 1rem;
          font-size: 0.85rem;
        }

        /* Footer adjustments */
        .footer {
          padding: 2rem 0 1rem;
        }

        .footer-section h4 {
          font-size: 1.1rem;
        }

        .footer-section p {
          font-size: 0.9rem;
        }

        .footer-links a {
          font-size: 0.9rem;
        }
      }

      @media (max-width: 575.98px) {
        .navbar {
          padding: 0.8rem 1rem;
        }

        .navbar-brand {
          font-size: 1.1rem;
        }

        .navbar-brand img {
          height: 30px;
        }

        .hero-content h1 {
          font-size: 1.8rem;
        }

        .search-title h2 {
          font-size: 1.5rem;
        }

        .feature-icon {
          width: 50px;
          height: 50px;
        }

        .feature-icon i {
          font-size: 1.5rem;
        }

        .feature-title {
          font-size: 1.2rem;
        }

        .btn {
          padding: 0.6rem 1.2rem;
          font-size: 0.9rem;
        }
      }

      /* Enhanced Landing Page Styles */
      .hero-section {
        position: relative;
        height: 100vh;
        display: flex;
        overflow: hidden;
        align-items: center;
        justify-content: center;
        padding: 8rem 0 6rem;
        text-align: left;
        background: url(./assets/images/bg-landing-page.png) no-repeat center center;
        background-size: cover;
      }


      .search-wrapper {
        display: flex;
        align-items: center;
        justify-content: center;
        animation: fadeIn 2s ease;
        margin-left: -10rem;
        margin-top: 2.5rem;
      }

      .search-image {
        width: 400px;
        height: auto;
        object-fit: contain;
        transition: transform 0.3s ease-in-out;
        z-index: 2;
        margin-right: -3rem;
      }

      .search-container {
        max-width: 740px;
        transition: all 0.3s ease-in-out;
      }

      .search-image:hover {
        transform: scale(1.05); 
      }

      /* Enhanced Feature Boxes */
      .feature-box {
        background: white;
        border-radius: 20px;
        padding: 2.5rem;
        box-shadow: var(--card-shadow);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }

      .feature-box::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--accent-color)
        );
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.4s ease;
      }

      .feature-box:hover {
        transform: translateY(-10px);
        box-shadow: var(--hover-shadow);
      }

      .feature-box:hover::before {
        transform: scaleX(1);
      }

      .feature-box i {
        font-size: 2.5rem;
        color: var(--primary-color);
        margin-bottom: 1.5rem;
        transition: all 0.3s ease;
      }

      .feature-box:hover i {
        transform: scale(1.1);
      }

      .feature-box h3 {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 1rem;
      }

      .feature-box p {
        color: #666;
        font-size: 1rem;
      }

      /* Enhanced Modal */
      .modal-content {
        border: none;
        border-radius: 20px;
        box-shadow: var(--box-shadow);
        overflow: hidden;
      }

      .modal-header {
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--secondary-color)
        );
        padding: 1.5rem;
      }

      .modal-title {
        font-weight: 600;
      }

      .modal-body {
        padding: 2rem;
      }

      /* Enhanced Form Elements */
      .form-control {
        padding: 1rem;
        border-radius: 12px;
        border: 2px solid rgba(46, 125, 50, 0.1);
        transition: all 0.3s ease;
      }

      .form-control:focus {
        border-color: var(--primary-color);
        box-shadow: var(--box-shadow);
      }

      .btn {
        padding: 0.8rem 1.5rem;
        font-weight: 500;
        transition: all 0.3s ease;
        border-radius: 12px;
      }

      .btn-primary {
        color: white;
        border-radius: 0px 25px;
        transition: all 0.2s ease;
        border: none;
        background: linear-gradient(
          180deg,
          var(--gradient-start),
          var(--gradient-end)
        );
      }


      /* Enhanced Footer Styles */
      .footer {
        background: linear-gradient(
          90deg,
          var(--gradient-start),
          var(--sec-gradient-end)
        );
        color: white;
        padding: 4rem 0 2rem;
        position: relative;
        margin-top: 4rem;
      }

      .footer-content {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 3rem;
        margin-bottom: 3rem;
      }

      .footer-section h4 {
        font-size: 1.3rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
        position: relative;
        display: inline-block;
      }

      .footer-section h4::after {
        content: "";
        position: absolute;
        bottom: -8px;
        left: 0;
        width: 50px;
        height: 3px;
        background: var(--accent-color);
        border-radius: 2px;
      }

      .footer-section p {
        color: rgba(255, 255, 255, 0.8);
        line-height: 1.6;
        margin-bottom: 1.5rem;
      }

      .footer-links {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .footer-links li {
        margin-bottom: 0.8rem;
      }

      .footer-links a {
        color: rgba(255, 255, 255, 0.8);
        text-decoration: none;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .footer-links a:hover {
        color: white;
        transform: translateX(5px);
      }

      .footer-links a i {
        font-size: 0.9rem;
        transition: all 0.3s ease;
      }

      .footer-links a:hover i {
        transform: rotate(360deg);
      }

      .footer-bottom {
        text-align: center;
        padding-top: 2rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
      }

      .footer-bottom p {
        color: rgba(255, 255, 255, 0.8);
        margin: 0;
      }

      .footer-bottom a {
        color: white;
        text-decoration: none;
        transition: all 0.3s ease;
      }

      .footer-bottom a:hover {
        color: var(--accent-color);
      }

      @media (max-width: 991.98px) {
        .footer-content {
          gap: 2rem;
        }
      }

      @media (max-width: 767.98px) {
        .footer {
          padding: 3rem 0 1.5rem;
        }

        .footer-section {
          text-align: center;
        }

        .footer-section h4::after {
          left: 50%;
          transform: translateX(-50%);
        }

        .social-icons {
          justify-content: center;
        }
      }

      /* Enhanced Chatbot Styles */
      df-messenger {
      --df-messenger-bot-message: rgb(234, 228, 228);
      --df-messenger-button-titlebar-color: var(--gradient-end);
      --df-messenger-chat-background-color: rgb(250, 246, 246);
      --df-messenger-minimized-chat-close-icon-color: var(--hover-shadow);
      --df-messenger-user-message: #8eceff;
      --df-messenger-font-color: black;
        transform: scale(0.9);
        transform-origin: bottom right;
        position: fixed;
        bottom: 10px;
        right: 10px;
        z-index: 1000; 
      }

      /* Add new styles for professional landing page */

      .search-container {
        background: white;
        border-radius: 20px;
        padding: 2.5rem;
        box-shadow: var(--box-shadow);
        position: relative;
        z-index: 1;
        animation: fadeInUp 1s ease-out 0.3s backwards;
        
      }

      .search-wrapper {
        align-items: flex-start; 
      }

      .search-title {
        text-align: center;
        margin-bottom: 1rem;
      }

      .search-title h2 {
        color: var(--secondary-color);
        font-size: 2.09rem;
        font-weight: 700;
      }
      .note {
        color: var(--secondary-color);
        font-size: 0.8rem;
        margin-bottom: 1rem;
      }
      .search-title p {
        color: #242424;
        font-size: 1.1rem;
      }

      .search-form {
        display: flex;
        gap: 1rem;
        margin-bottom: 2rem;
      }

      .search-input {
        flex: 1;
        padding: 1rem 1.5rem;
        border: 2px solid rgba(10, 9, 25, 0.589);
        border-radius: 12px;
        font-size: 1.1rem;
        transition: all 0.3s ease;
      }

      .search-input:focus {
        border-color: var(--primary-color);
        box-shadow: var(--box-shadow);
        outline: none;
      }

      .search-button {
        padding: 0.8rem 1.5rem;
        background: linear-gradient(
          135deg,
          var(--gradient-start),
          var(--gradient-end)
        );
        color: white;
        border: none;
        border-radius: 25px; /* Increased border-radius for more roundness */
        font-size: 1.1rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        min-width: fit-content; /* Ensures button doesn't get too narrow */
      }

      .search-button:hover{
        font-size: 1.2rem;
      }

      .search-results {
        display: none;
        animation: fadeInUp 0.5s ease-out;
      }

      .result-card {
        background: white;
        border-radius: 15px;
        padding: 2rem;
        margin-top: 2rem;
        box-shadow: var(--box-shadow);
        border-left: 4px solid var(--primary-color);
        transition: all 0.3s ease;
      }

      .result-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--box-shadow);
      }

      .custom-thead th {
        background-color: var(--primary-color);
        color: white;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-size: 0.9rem;
        padding: 1rem 0.75rem;
        border: none;
        position: relative;
      }

      .custom-thead th:first-child {
        border-top-left-radius: 8px;
      }

      .custom-thead th:last-child {
        border-top-right-radius: 8px;
      }

      /* Enhanced table styling */
      .table-enhanced {
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        border: none;
        margin-bottom: 2rem;
      }

      .table-enhanced tbody tr {
        transition: all 0.3s ease;
        border-bottom: 1px solid #f0f0f0;
      }

      .table-enhanced tbody tr:hover {
        background-color: rgba(46, 125, 50, 0.05);
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .table-enhanced tbody tr:last-child {
        border-bottom: none;
      }

      .table-enhanced td {
        padding: 1.25rem 0.75rem;
        vertical-align: middle;
        border: none;
        font-size: 0.95rem;
        color: var(--text-color);
      }

      .table-enhanced .badge {
        font-size: 0.8rem;
        padding: 0.5rem 0.75rem;
        border-radius: 20px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.3px;
      }

      /* Responsive table */
      @media (max-width: 768px) {
        .table-responsive {
          border-radius: 8px;
          overflow: hidden;
        }
        
        .table-enhanced td,
        .table-enhanced th {
          padding: 0.75rem 0.5rem;
          font-size: 0.85rem;
        }
        
        .table-enhanced .badge {
          font-size: 0.7rem;
          padding: 0.4rem 0.6rem;
        }
      }

      /* Enhanced button styling */
      .btn-lg {
        padding: 0.75rem 1.5rem;
        font-size: 1.1rem;
        border-radius: 8px;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .btn-lg:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      /* Enhanced result card */
      .result-card {
        background: white;
        border-radius: 16px;
        padding: 2rem;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(46, 125, 50, 0.1);
        transition: all 0.3s ease;
      }

      .result-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
      }

      .result-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid rgba(46, 125, 50, 0.1);
      }

      .result-title {
        color: var(--primary-color);
        font-size: 1.5rem;
        font-weight: 600;
        margin: 0;
      }

      .result-status {
        padding: 0.5rem 1.2rem;
        border-radius: 20px;
        font-weight: 500;
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .result-details {
        padding: 1rem 0;
      }

      .detail-item {
        padding: 1rem;
        background: var(--light-bg);
        border-radius: 10px;
        margin-bottom: 1rem;
        transition: all 0.3s ease;
      }

      .detail-item:hover {
        transform: translateX(5px);
        background: rgba(46, 125, 50, 0.05);
      }

      .detail-label {
        color: #666;
        font-size: 0.9rem;
        margin-bottom: 0.5rem;
        font-weight: 500;
      }

      .detail-value {
        color: var(--text-color);
        font-size: 1.1rem;
        font-weight: 500;
      }

      .remarks-item {
        background: rgba(46, 125, 50, 0.05);
        border-left: 3px solid var(--accent-color);
      }

      .status-pending {
        background-color: #fff3cd;
        color: #856404;
      }

      .status-progress {
        background-color: #cce5ff;
        color: #004085;
      }

      .status-completed {
        background-color: #d4edda;
        color: #155724;
      }

      .status-archived {
        background-color: #e2e3e5;
        color: #383d41;
      }

      .features-section {
        padding: 6rem 0;
        background: white;
        position: relative;
      }

      .features-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 100px;
        background: linear-gradient(to bottom, var(--light-bg), white);
      }

      .section-title {
        text-align: center;
        margin-bottom: 4rem;
      }

      .section-title h2 {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 1rem;
      }

      .section-title p {
        color: #666;
        font-size: 1.1rem;
        max-width: 600px;
        margin: 0 auto;
      }

      .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        padding: 2rem 0;
      }

      .feature-card {
        background: white;
        border-radius: 20px;
        padding: 2.5rem;
        box-shadow: var(--box-shadow);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .feature-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(
          90deg,
          var(--gradient-start),
          var(--gradient-end)
        );
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.3s ease;
      }

      .feature-card:hover {
        transform: translateY(-10px);
        box-shadow: var(--box-shadow);
      }

      .feature-card:hover::before {
        transform: scaleX(1);
      }

      .feature-icon {
        width: 70px;
        height: 70px;
        background: rgba(46, 125, 50, 0.1);
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1.5rem;
        transition: all 0.3s ease;
      }

      .feature-card:hover .feature-icon {
        transform: scale(1.1);
        background: linear-gradient(
          135deg,
          var(--gradient-start),
          var(--sec-gradient-end)
        );
      }

      .feature-card:hover .feature-icon i {
        color: white;
      }

      .feature-icon i {
        font-size: 2rem;
        color: var(--primary-color);
        transition: all 0.3s ease;
      }

      .feature-title {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 1rem;
        color: var(--text-color);
      }

      .feature-description {
        color: #666;
        line-height: 1.6;
      }

      .contact-section {
        padding: 6rem 0;
        background: var(--light-bg);
        position: relative;
      }

      .contact-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 100px;
        background: linear-gradient(to bottom, white, var(--light-bg));
      }

      .contact-form {
        background: white;
        border-radius: 20px;
        padding: 3rem;
        box-shadow: var(--box-shadow);
      }

      .form-control {
        padding: 1rem 1.2rem;
        border: 2px solid rgba(46, 125, 50, 0.1);
        border-radius: 12px;
        font-size: 1rem;
        transition: all 0.3s ease;
      }

      .form-control:focus {
        border-color: var(--primary-color);
        box-shadow: var(--box-shadow);
      }

      /* Add styles for message input */
      .message-input {
        display: flex;
        padding: 1rem;
        background: white;
        border-top: 1px solid rgba(46, 125, 50, 0.1);
      }

      .message-input input {
        flex: 1;
        border: none;
        padding: 0.8rem;
        border-radius: 20px;
        background: var(--light-bg);
        margin-right: 1rem;
        font-size: 0.9rem;
      }

      .message-input input:focus {
        outline: none;
        box-shadow: var(--box-shadow);
      }

      .message-input button {
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        color: white;
        border: none;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
      }

      .message-input button:hover {
        transform: scale(1.1);
        box-shadow: var(--box-shadow);
      }

      /* Add these specific styles for Pixel 7 and similar devices */
      @media screen and (max-width: 412px) {
        /* Hero section adjustments */
        .hero-section {
          padding: 4rem 0 2rem;
          min-height: auto;
        }

        .hero-content h1 {
          font-size: 1.8rem;
          line-height: 1.3;
        }

        .hero-content p {
          font-size: 0.9rem;
        }

        /* Search container adjustments */
        .search-container {
          padding: 1.5rem;
          margin-top: 2rem;
        }

        .search-form {
          flex-direction: column-reverse;
          gap: 0.5rem;
        }

        .search-input {
          width: 100%;
          padding: 0.8rem;
          font-size: 0.9rem;
        }

        .search-button {
          width: 100%;
          padding: 0.8rem;
          border-radius: 25px;
          
        }

        /* Features section adjustments */
        .features-section {
          padding: 3rem 0;
        }

        .feature-card {
          padding: 1.5rem;
        }

        .section-title h2 {
          font-size: 1.8rem;
        }

        .section-title p {
          font-size: 0.9rem;
        }

        /* Navbar adjustments */
        .navbar {
          padding: 0.5rem 1rem;
        }

        .navbar-brand {
          font-size: 1rem;
        }

        .navbar-brand img {
          height: 25px;
        }

        /* Footer adjustments */
        .footer {
          padding: 2rem 0 1rem;
        }

        .footer-section {
          text-align: center;
        }

        .footer-section h4 {
          font-size: 1.1rem;
        }

        .social-icons {
          justify-content: center;
        }
      }

      /* Update the existing search button styles */
      .search-button {
        padding: 0.8rem 1.5rem;
        border-radius: 25px;
        font-size: 1rem;
        width: auto;
        white-space: nowrap;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        min-width: 120px;;
      }

      @media screen and (max-width: 412px) {
        .input-group {
          flex-direction: row;
          width: 100%;
          height: auto;
        }

        .search-button {
          width: 20%;
          
        }

        /* Container padding adjustments */
        .container {
          padding-left: 1rem;
          padding-right: 1rem;
        }
      }
    </style>
  </head>

  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light py-2">
      <div class="container">
        <a class="navbar-brand" href="#">
          <img src="assets/images/logo.png" alt="CentralComm Logo" />
          <span class="central-brand">Central</span>
          <span class="comm-brand">Comm</span>
        </a>  
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="#home">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#demo">Features</a>
            </li>
            <li class="nav-item">
              <a class="nav-link login-btn" href="pages/selection.html">
                <i class="fas fa-sign-in-alt me-2"></i>Staff Log in
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section" id="home">
      <div class="container">
        <div class="search-wrapper">
          <img src="./assets/images/img-landing-page.png" alt="Graphic" class="search-image" />
          <div class="search-container">
            <div class="search-title">
              <h2>Baguio City Hall Document Tracking</h2>
            </div>
            <div class="note">
              <p>Processing of documents typically takes 2-3 days. You'll receive an email notification upon completion.</p>
            </div>
            <div class="search-form">
              <div class="input-group">
                <input
                  type="text"
                  class="search-input"
                  id="controlNumberInput"
                  placeholder="Enter control number"
                  pattern="[0-9]{4}-[0-9]{6}"
                />
                <button class="search-button" onclick="searchDocument()">
                  <i class="fas fa-search"></i> Search
                </button>
              </div>
            </div>
            <div id="search-results" class="search-results">
              <!-- Results will be displayed here -->
            </div>
          </div>
        </div>
      </div>
    </section>


    <!-- Features Section -->
    <section class="features-section" id="demo">
      <div class="container">
        <div class="section-title">
          <h2>Main Features</h2>
          <p>
            Experience efficient document management with our advanced tracking
            system
          </p>
        </div>
        <div class="features-grid">
          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-chart-line"></i>
            </div>
            <h3 class="feature-title">Report Generation</h3>
            <p class="feature-description">
              Automatically generate reports of documents that goes through the system.
            </p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-shield-alt"></i>
            </div>
            <h3 class="feature-title">Secure Tracking</h3>
            <p class="feature-description">
              Your document information is protected with advanced security
              measures and encryption.
            </p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-history"></i>
            </div>
            <h3 class="feature-title">Document History</h3>
            <p class="feature-description">
              View complete history and track your document's journey through
              the system.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact Section
    <section class="contact-section" id="contact">
      <div class="container">
        <div class="section-title">
          <h2>Contact Us</h2>
          <p>
            Have questions? We're here to help you with your document management
            needs
          </p>
        </div>
        <div class="row">
          <div class="col-lg-6">
            <img
              src="icons&images/contact-img.svg"
              alt="Contact Image"
              class="img-fluid"
            />
          </div>
          <div class="col-lg-6">
            <div class="contact-form">
              <form>
                <div class="mb-3">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Full Name"
                    required
                  />
                </div>
                <div class="mb-3">
                  <input
                    type="email"
                    class="form-control"
                    placeholder="Email Address"
                    required
                  />
                </div>
                <div class="mb-3">
                  <input
                    type="tel"
                    class="form-control"
                    placeholder="Phone Number"
                    required
                  />
                </div>
                <div class="mb-3">
                  <textarea
                    class="form-control"
                    rows="5"
                    placeholder="Your Message"
                    required
                  ></textarea>
                </div>
                <button type="submit" class="btn btn-primary w-100">
                  <i class="fas fa-paper-plane me-2"></i> Send Message
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section> -->

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <h4>About Us</h4>
            <p>
              CentralComm is a comprehensive document management system designed
              to streamline workflows and enhance productivity for Baguio City
              Hall.
            </p>
          </div>
          <div class="footer-section">
            <h4>Quick Links</h4>
            <ul class="footer-links">
              <li>
                <a href="#home"><i class="fas fa-chevron-right"></i> Home</a>
              </li>
              <li>
                <a href="#demo"
                  ><i class="fas fa-chevron-right"></i> Features</a
                >
              </li>
              <li>
                <a href="auth/login.html"
                  ><i class="fas fa-chevron-right"></i> Login</a
                >
              </li>
            </ul>
          </div>
          <div class="footer-section">
            <h4>Contact Info</h4>
            <ul class="footer-links">
              <li>
                <a href="#"
                  ><i class="fas fa-map-marker-alt"></i> Baguio City Hall</a
                >
              </li>
              <li>
                <a href="tel:+63744423939"
                  ><i class="fas fa-phone"></i> (074) 442-3939</a
                >
              </li>
              <li>
                <a href="mailto:cmobaguio2600@gmail.com"
                  ><i class="fas fa-envelope"></i> cmobaguio2600@gmail.com</a
                >
              </li>
              <li>
                <a href="#"
                  ><i class="fas fa-clock"></i> Mon-Fri: 8:00 AM - 5:00 PM</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div class="footer-bottom">
          <p>© 2024-2025 <a href="#">CentralComm</a> | All Rights Reserved</p>
        </div>
      </div>
    </footer>

    <!-- chatbot -->
    <df-messenger
      intent="WELCOME"
      chat-title="QuickAssist"
      agent-id="5df5da0d-87aa-4c45-bf26-0eace8fc66b9"
      language-code="en"
      expand="true"
<<<<<<< HEAD
      chat-icon="https://www.pngall.com/wp-content/uploads/15/ChatBot-PNG-Clipart.png" 
=======
      chat-icon="https://png.pngtree.com/png-clipart/20230401/original/pngtree-smart-chatbot-cartoon-clipart-png-image_9015126.png"
>>>>>>> e9fa4214c29096212c543dd9a9533aede720c495
    ></df-messenger>

    
    <!-- Firebase App (the core Firebase SDK) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>

    <!-- Firebase Realtime Database -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

    <!-- EmailJS for email notifications -->
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

    
    <script>

      // Initialize EmailJS
      emailjs.init('mr3lRz__Eu1dWmX1Z'); // Replace with your EmailJS user ID

      // Search Input
      function focusSearchInput() {
        setTimeout(() => {
          const input = document.getElementById("controlNumberInput");
          if (input) {
            input.focus();
          }
        }, 100);
      }

      // Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyCaSHRLbIRWW8COl5iwHb19dMDYYLJ2DIk",
        authDomain: "centralcomm-248a9.firebaseapp.com",
        databaseURL: "https://centralcomm-248a9-default-rtdb.firebaseio.com",
        projectId: "centralcomm-248a9",
        storageBucket: "centralcomm-248a9.firebasestorage.app",
        messagingSenderId: "796912003621",
        appId: "1:796912003621:web:0d6fd82e43399871a9edcc",
        measurementId: "G-CN0S9L5YV4",
      };

      // Initialize Firebase
      if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
      }
      const database = firebase.database();

      // Generate unique verification token
      function generateVerificationToken() {
        return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
      }

      // Send verification email to document owner
      function sendVerificationEmail(controlNumber, clientEmail, documentData) {
        const verificationToken = generateVerificationToken();
        const timestamp = Date.now();
        
        // Store verification request in Firebase
        const verificationRef = database.ref('verificationRequests');
        verificationRef.push({
          controlNumber: controlNumber,
          clientEmail: clientEmail,
          token: verificationToken,
          timestamp: timestamp,
          status: 'pending', // pending, approved, denied
          documentData: documentData,
          requesterIP: 'web-request', // In a real app, you'd get the actual IP
          requesterUserAgent: navigator.userAgent
        });

        // Send email using EmailJS
        emailjs.send('service_ipk7qkc', 'template_49pyxjf', {
          to_email: clientEmail,
          control_number: controlNumber,
          verification_token: verificationToken,
          document_subject: documentData.subject || 'Document',
          approve_url: `${window.location.origin}/verify.html?token=${verificationToken}&action=approve`,
          deny_url: `${window.location.origin}/verify.html?token=${verificationToken}&action=deny`,
          timestamp: new Date(timestamp).toLocaleString()
        })
        .then(function(response) {
          console.log('Verification email sent!', response.status, response.text);
        }, function(error) {
          console.error('Failed to send verification email:', error);
        });
      }

      // Log activity function for tracking document edits
      function logActivity(action, details, controlNumber) {
        try {
          const logData = {
            action: action,
            details: details,
            controlNumber: controlNumber,
            timestamp: Date.now(),
            userEmail: 'public_user', // Since this is the public search page
            userType: 'public'
          };
          
          // Save to Firebase logs
          database.ref("logs").push(logData)
            .then(() => {
              console.log("Activity logged successfully:", logData);
            })
            .catch(error => {
              console.error("Error logging activity:", error);
            });
        } catch (error) {
          console.error("Error in logActivity function:", error);
        }
      }



      // Document search functionality with verification
      function searchDocument() {
        const controlNumber = document.getElementById('controlNumberInput').value.trim();
        const searchResults = document.getElementById('search-results');
        
        // Clear previous results
        searchResults.innerHTML = '';
        searchResults.style.display = 'none';
        
        if (!controlNumber) {
          showError('Please enter a control number to search.');
          return;
        }

        // Show loading state
        searchResults.style.display = 'block';
        searchResults.innerHTML = `
          <div class="result-card">
            <div class="d-flex justify-content-center">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
              <p class="ms-3 mt-2">Searching for document...</p>
            </div>
          </div>
        `;

        // Search for document in Firebase
        database.ref('entries')
          .orderByChild('controlNumber')
          .equalTo(controlNumber)
          .once('value')
          .then(snapshot => {
            if (snapshot.exists()) {
              snapshot.forEach(childSnapshot => {
                const data = childSnapshot.val();
                
                // Check if document has an associated email
                if (data.fromEmail) {
                  // Send verification email to document owner
                  sendVerificationEmail(controlNumber, data.fromEmail, data);
                  
                  // Show verification pending message
                  showVerificationPending(data);
                } else {
                  // No email associated, show document directly
                  displaySearchResults(data);
                  
                  // Log the document view
                  logActivity("document_view", `Document viewed by public user`, controlNumber);
                }
              });
            } else {
              showError(`No document found with control number "${controlNumber}"`);
            }
          })
          .catch(error => {
            console.error('Error searching document:', error);
            showError('An error occurred while searching. Please try again.');
          });
      }

      // Show verification pending message
      function showVerificationPending(documentData) {
        const searchResults = document.getElementById("search-results");
        searchResults.innerHTML = `
          <div class="result-card">
            <div class="text-center">
              <i class="fas fa-envelope-open-text text-primary" style="font-size: 3rem; margin-bottom: 1rem;"></i>
              <h3 class="result-title mb-3">Verification Required</h3>
              <p class="mb-3">
                A verification email has been sent to the document owner's email address. 
                The document will be displayed once the owner approves your request.
              </p>
              <div class="alert alert-info">
                <strong>Document Details:</strong><br>
                Control Number: ${documentData.controlNumber}<br>
                Subject: "Content Hidden"<br>
                Status: "Content Hidden"
              </div>
              <p class="text-muted">
                <small>
                  <i class="fas fa-info-circle"></i>
                  You will receive an email notification once the verification is complete.
                </small>
              </p>
            </div>
          </div>
        `;
        searchResults.style.display = 'block';
      }

      // Check verification status (called periodically or when user returns)
      function checkVerificationStatus(controlNumber) {
        const searchResults = document.getElementById("search-results");
        
        database.ref('verificationRequests')
          .orderByChild('controlNumber')
          .equalTo(controlNumber)
          .once('value')
          .then(snapshot => {
            if (snapshot.exists()) {
              snapshot.forEach(childSnapshot => {
                const verification = childSnapshot.val();
                
                if (verification.status === 'approved') {
                  // Show the document
                  displaySearchResults(verification.documentData);
                  
                  // Log the document view
                  logActivity("document_view", `Document viewed by public user after verification`, verification.documentData.controlNumber);
                  
                  // Clean up verification request
                  childSnapshot.ref.remove();
                } else if (verification.status === 'denied') {
                  showError('Access to this document has been denied by the document owner.');
                  
                  // Clean up verification request
                  childSnapshot.ref.remove();
                }
                // If still pending, do nothing (keep showing verification pending message)
              });
            }
          })
          .catch(error => {
            console.error('Error checking verification status:', error);
          });
      }

      function showError(message) {
        const searchResults = document.getElementById('search-results');
        searchResults.innerHTML = `
          <div class="result-card">
            <div class="alert alert-danger" role="alert">
              <i class="fas fa-exclamation-circle me-2"></i>${message}
            </div>
          </div>
        `;
        searchResults.style.display = 'block';
      }

      function displaySearchResults(data) {
        const searchResults = document.getElementById("search-results");
        
        // First show the table with loading state for last edited
        searchResults.innerHTML = `
          <div class="result-card">
            <h3 class="result-title mb-4">
              <i class="fas fa-file-alt me-2"></i>Document Status
            </h3>
            <div class="table-responsive">
              <table class="table table-enhanced">
                <thead>
                  <tr class="custom-thead">
                    <th><i class="fas fa-hashtag me-1"></i>Control Number</th>
                    <th><i class="fas fa-calendar-alt me-1"></i>Date Received</th>
                    <th><i class="fas fa-info-circle me-1"></i>Status (Last Event)</th>
                    <th><i class="fas fa-comment me-1"></i>Remarks</th>
                    <th><i class="fas fa-edit me-1"></i>Last Edited</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><strong>${data.controlNumber}</strong></td>
                    <td>${formatDate(data.dateReceived)}</td>
                    <td><span class="badge ${getStatusClass(data.status)}">${data.status}</span></td>
                    <td>${data.statusRemarks || '<span class="text-muted">No remarks</span>'}</td>
                    <td id="last-edited-cell">
                      <div class="d-flex align-items-center">
                        <div class="spinner-border spinner-border-sm text-primary me-2" role="status">
                          <span class="visually-hidden">Loading...</span>
                        </div>
                        <span class="text-muted">Loading...</span>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

          </div>
        `;
        searchResults.style.display = 'block';
        
        // Now fetch the last edit information from logs
        getLastEditInfo(data.controlNumber);
      }

      function formatDate(dateString) {
        try {
          const date = new Date(dateString);
          if (isNaN(date.getTime())) {
            return dateString;
          }
          return date.toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
          });
        } catch (error) {
          console.error('Error formatting date:', error);
          return dateString;
        }
      }

      function getStatusClass(status) {
        const statusClasses = {
          // Regular statuses
          Pending: "bg-warning",
          Processing: "bg-info",
          Completed: "bg-success",
          Archived: "bg-secondary",
          
          // Complaint statuses
          "Under Investigation": "bg-danger",
          "Inspection": "bg-success",
          
          // Request statuses
          "For Review": "bg-info",
          "Request Granted": "bg-success",
          
          // Invitation statuses
          "Calendar Pending": "bg-warning",
          "Mayor Decision": "bg-info",
          
          // Proposal statuses
          "Review Study": "bg-info",
          "Decision Made": "bg-success"
        };
        return statusClasses[status] || "bg-warning";
      }

      // Function to get last edit information from logs
      function getLastEditInfo(controlNumber) {
        try {
          // Query logs for this document, looking for edit actions
          database.ref("logs")
            .orderByChild("controlNumber")
            .equalTo(controlNumber)
            .once('value')
            .then(snapshot => {
              const logs = snapshot.val();
              
              if (logs && Object.keys(logs).length > 0) {
                // Convert logs object to array and filter for edit actions
                const logsArray = Object.entries(logs).map(([key, log]) => ({
                  ...log,
                  key: key
                }));
                
                // Filter for edit-related actions and sort by timestamp (newest first)
                const editActions = logsArray
                  .filter(log => ['update', 'field_update', 'edit', 'modify'].includes(log.action))
                  .sort((a, b) => b.timestamp - a.timestamp);
                
                if (editActions.length > 0) {
                  const lastEdit = editActions[0];
                  const date = new Date(lastEdit.timestamp);
                  const formattedDate = date.toLocaleString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                  });
                  
                  const lastEditedCell = document.getElementById('last-edited-cell');
                  if (lastEditedCell) {
                    lastEditedCell.innerHTML = `
                      <div>
                        <div class="fw-bold">${lastEdit.user || lastEdit.userEmail || 'Unknown User'}</div>
                        <div class="text-muted small">${formattedDate}</div>
                      </div>
                    `;
                  }
                } else {
                  // No edit actions found, show "Not available"
                  const lastEditedCell = document.getElementById('last-edited-cell');
                  if (lastEditedCell) {
                    lastEditedCell.innerHTML = '<span class="text-muted">Not available</span>';
                  }
                }
              } else {
                // No logs found, show "Not available"
                const lastEditedCell = document.getElementById('last-edited-cell');
                if (lastEditedCell) {
                  lastEditedCell.innerHTML = '<span class="text-muted">Not available</span>';
                }
              }
            })
            .catch(error => {
              console.error('Error fetching last edit info:', error);
              const lastEditedCell = document.getElementById('last-edited-cell');
              if (lastEditedCell) {
                lastEditedCell.innerHTML = '<span class="text-danger">Error loading</span>';
              }
            });
        } catch (error) {
          console.error('Error in getLastEditInfo function:', error);
          const lastEditedCell = document.getElementById('last-edited-cell');
          if (lastEditedCell) {
            lastEditedCell.innerHTML = '<span class="text-danger">Error loading</span>';
          }
        }
      }



      // Initialize event listeners when DOM is loaded
      document.addEventListener("DOMContentLoaded", () => {
        // Focus the control number input field
        focusSearchInput();
        
        // Add event listener for Enter key in search input
        document.getElementById("controlNumberInput").addEventListener("keypress", (e) => {
          if (e.key === "Enter") {
            searchDocument();
          }
        });

        // Check for verification status every 30 seconds if there's a pending verification
        setInterval(() => {
          const controlNumber = document.getElementById('controlNumberInput').value.trim();
          if (controlNumber) {
            checkVerificationStatus(controlNumber);
          }
        }, 30000); // Check every 30 seconds
      });
    </script>
  </body>
</html>
